<p id="notice"><%= notice %></p>
<script type="text/javascript">
  $(document).ready(function() {
    // Sort by Time per default
    setTimeout(function() {
      $("th:contains('Time')").click().click();
    }, 250);
  });
</script>
<h4>
  Measurements for locations within postal code <%= @postal_code %> at <%= @date %></br>
</h4>
<h6><em>(<strong>hint:</strong> the tables are sortable)</em></h6>
<% @stations.each do |station| %>
<h5>Location: <%= station.name %> (id: <%= station.id %>) - last updated at <%= Time.at(station.last_measurement.timestamp).strftime("%H:%M%P %d-%m-%Y") %></h5>
  <table id="<%= station.id %>" class="table table-striped table-bordered sortable-theme-bootstrap" data-sortable>
    <thead>
      <tr>
        <th>Time</th>
        <th>Rainfall (60 min)</th>
        <th>Temperature</th>
        <th>Wind direction</th>
        <th>Wind speed (km/h)</th>
      </tr>
    </thead>

    <tbody>
      <% if station.get_date_measurements(@date).size == 0 %>
        <tr><td colspan="5">No measurements found at this date.</td></tr>
      <% end %>
      <% station.get_date_measurements(@date).each do |measurement| %>
        <tr class="measurement">
          <td class="time"><%= Time.at(measurement.timestamp).strftime("%H:%M%P %d-%m-%Y") %></td>
          <td class="precipitation"><%= measurement.precipitation.round(1) %>mm</td>
          <td class="temperature"><%= measurement.precipitation.round(1) %>mm</td>
          <td class="wind_direction"><i class="fa fa-long-arrow-up wind-arrow" style="transform: rotate(<%= measurement.wind_direction.round(1)%>deg)"></i></td>
          <td class="wind_speed"><%= measurement.wind_speed.round(1) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>